<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genel Cerrahi Doktorları Listele</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f0f4f8, #e2e8f0);
            color: #333;
            padding: 20px;
        }
        h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        .container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            flex-direction: column;
        }
        .checkbox-list {
            margin-top: 20px;
        }
        .checkbox-list label {
            display: block;
            margin: 10px 0;
            font-size: 1.1rem;
        }
        .action-icons i {
            cursor: pointer;
            padding: 5px;
        }
    </style>
</head>
<body>

    <h2>Genel Cerrahi Doktorları Listele</h2>

    <div class="container">
        <div class="checkbox-list" id="doctorCheckboxList">
            <!-- Doktorların checkbox'ları burada listelenecek -->
        </div>
    </div>

    <script>
        let db;
        let doctors = [];

        // IndexedDB'yi başlat
        const request = indexedDB.open("GeneralSurgeryDB", 1);

        request.onupgradeneeded = function(event) {
            db = event.target.result;
            const objectStore = db.createObjectStore("doctors", { keyPath: "id", autoIncrement: true });
            objectStore.createIndex("name", "name", { unique: false });
        };

        request.onsuccess = function(event) {
            db = event.target.result;
            loadDoctors();
        };

        request.onerror = function(event) {
            console.error("Database error: " + event.target.errorCode);
        };

        function loadDoctors() {
            const transaction = db.transaction("doctors", "readonly");
            const objectStore = transaction.objectStore("doctors");
            const request = objectStore.getAll();

            request.onsuccess = function(event) {
                doctors = event.target.result.map(doc => ({ id: doc.id, name: doc.name }));
                renderCheckboxList();
            };
        }

        function renderCheckboxList() {
            const checkboxListContainer = document.getElementById('doctorCheckboxList');
            checkboxListContainer.innerHTML = ''; // Önceki içerikleri temizle

            doctors.forEach(doctor => {
                const checkboxLabel = document.createElement('label');
                checkboxLabel.innerHTML = `
                    <input type="checkbox" id="doctor_${doctor.id}" value="${doctor.id}">
                    ${doctor.name}
                `;
                checkboxListContainer.appendChild(checkboxLabel);
            });
        }
    </script>
</body>
</html>
