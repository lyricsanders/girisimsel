<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plastik Cerrahi Doktoru Ekleme</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <style>
    /* Bu stil, indexstil'e benzer şekilde uygulanacaktır */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }
    header {
      background-color: #333;
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    table {
      width: 100%;
      margin: 20px 0;
      border-collapse: collapse;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th, td {
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #333;
      color: white;
    }
    .form-container {
      margin: 20px 0;
    }
    input[type="text"] {
      padding: 10px;
      width: 300px;
      margin-right: 10px;
    }
    .btn {
      background-color: #333;
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
    }
    .btn:hover {
      background-color: #555;
    }
    .icon-btn {
      background-color: transparent;
      border: none;
      cursor: pointer;
    }
    .icon-btn:hover {
      color: #555;
    }
  </style>
</head>
<body>

<header>
  <h1>Plastik Cerrahi Doktoru Ekleme</h1>
</header>

<div class="form-container">
  <input type="text" id="doctorName" placeholder="Plastik Cerrahi Doktoru Adı">
  <button class="btn" onclick="addDoctor()">Kaydet</button>
</div>

<table id="doctorTable">
  <thead>
    <tr>
      <th>#</th>
      <th>Plastik Cerrahi Doktoru Adı</th>
      <th>İşlemler</th>
    </tr>
  </thead>
  <tbody>
    <!-- Firebase verileri buraya dinamik olarak eklenecek -->
  </tbody>
</table>

<script>
// Firebase Konfigürasyonu
const firebaseConfig = {
  apiKey: "AIzaSyCuMD2_NTb42XTrC_TvRPNCzQ__D7-ZDBY",
  authDomain: "gcdbaaa.firebaseapp.com",
  databaseURL: "https://gcdbaaa-default-rtdb.firebaseio.com",
  projectId: "gcdbaaa",
  storageBucket: "gcdbaaa.firebasestorage.app",
  messagingSenderId: "740142411040",
  appId: "1:740142411040:web:3535938c5a34d23e503b45",
  measurementId: "G-N69CEGVF0Y"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const doctorsRef = db.ref("plastik_cerrahi_doktorlari");

// Veriyi Firebase'e Kaydetme
function addDoctor() {
  const doctorName = document.getElementById("doctorName").value;
  if (doctorName) {
    const newDoctor = doctorsRef.push();
    newDoctor.set({
      name: doctorName
    });
    document.getElementById("doctorName").value = ''; // Input temizle
  }
}

// Firebase'den verileri alma ve tabloya ekleme
doctorsRef.on("child_added", function(snapshot) {
  const doctor = snapshot.val();
  const row = document.createElement("tr");

  // # sütunu
  const numberCell = document.createElement("td");
  numberCell.innerText = '';
  row.appendChild(numberCell);

  // Plastik Cerrahi Doktoru Adı sütunu
  const nameCell = document.createElement("td");
  nameCell.innerText = doctor.name;
  row.appendChild(nameCell);

  // İşlemler sütunu (Düzenle ve Sil butonları)
  const actionsCell = document.createElement("td");
  const editButton = document.createElement("button");
  editButton.innerText = "Düzenle";
  editButton.onclick = function() {
    editDoctor(snapshot.key);
  };
  const deleteButton = document.createElement("button");
  deleteButton.innerText = "Sil";
  deleteButton.onclick = function() {
    deleteDoctor(snapshot.key);
  };
  actionsCell.appendChild(editButton);
  actionsCell.appendChild(deleteButton);
  row.appendChild(actionsCell);

  // Tabloya yeni satır ekle
  document.getElementById("doctorTable").getElementsByTagName("tbody")[0].appendChild(row);
});

// Veriyi düzenleme
function editDoctor(key) {
  const newName = prompt("Yeni doktor adını girin:");
  if (newName) {
    doctorsRef.child(key).update({
      name: newName
    });
  }
}

// Veriyi silme
function deleteDoctor(key) {
  if (confirm("Bu doktoru silmek istediğinizden emin misiniz?")) {
    doctorsRef.child(key).remove();
  }
}
</script>

</body>
</html>
